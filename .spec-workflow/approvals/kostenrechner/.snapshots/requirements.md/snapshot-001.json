{
  "id": "snapshot_1763641344385_gkf9ca7qt",
  "approvalId": "approval_1763641344377_20rbkzyc0",
  "approvalTitle": "Requirements Document - Kostenrechner",
  "version": 1,
  "timestamp": "2025-11-20T12:22:24.385Z",
  "trigger": "initial",
  "status": "pending",
  "content": "# Requirements Document: Kostenrechner\n\n## Introduction\n\nDer **Kostenrechner f√ºr Webseiten & Apps** ist ein interaktiver Multi-Step-Kalkulator, der potenziellen Kunden eine transparente Kostensch√§tzung f√ºr ihre Projekt-Anforderungen bietet. Das Feature integriert einen **3-Wege-Vergleich** (Freelancer vs. Traditionelle Agentur vs. HEADON), um HEADON als optimale Balance zwischen Qualit√§t, Geschwindigkeit und Preis zu positionieren.\n\n**Kernwert:**\n- **Transparenz**: Klare Preisvorstellungen ohne Vertriebsgespr√§ch\n- **Lead-Generierung**: Qualifizierte Leads durch intelligentes Lead-Scoring\n- **Competitive Positioning**: HEADON als beste Wahl im Markt\n- **SEO-Traffic**: Rankings f√ºr \"Website Kosten Rechner\", \"App Entwicklung Preis\"\n\n**Business Impact:**\n- >15% Conversion Rate (Leads von Nutzern)\n- >60% Completion Rate (Step 1 ‚Üí Step 6)\n- >20 Punkte durchschnittlicher Lead Score\n- 500+ monatliche Nutzer nach 3 Monaten\n\n## Alignment with Product Vision\n\nDieser Kostenrechner verst√§rkt die Kern-Produktziele von HEADON.pro:\n\n### Lead-Generierung mit Qualit√§ts-Filter\n- **Alignment**: Der Kostenrechner erweitert das bestehende Lead-Management (Multi-Step Contact Form) um einen **Qualifier-Mechanismus**\n- **Synergy**: Nutzt dieselbe Supabase-Infrastruktur und Resend-Email-Integration\n- **Enhancement**: Automatisches Lead-Scoring basierend auf Projekt-Komplexit√§t, Budget und Timeline\n\n### Content-Marketing & Authority Building\n- **Alignment**: Neue Content-Kategorie erg√§nzt Blog, Glossar und Vergleichs-Artikel\n- **SEO-Strategy**: Rankings f√ºr transactionale Keywords (\"Kosten berechnen\", \"Preis Rechner\")\n- **Traffic-Source**: Qualifizierter Traffic mit hoher Kaufabsicht\n\n### Performance Leadership\n- **Alignment**: Folgt denselben Performance-Standards (LCP < 1.5s, Lighthouse 95+)\n- **Technology**: Next.js 15, React Server Components, Tailwind CSS v4\n- **Optimization**: Static Generation f√ºr schnelle Ladezeiten\n\n### Data-Driven Optimization\n- **Alignment**: Integration mit Umami Analytics f√ºr Conversion-Tracking\n- **Metrics**: Detailliertes Event-Tracking f√ºr Funnel-Analyse\n- **Privacy**: GDPR-konform, Cookie-frei wie bestehende Analytics\n\n## Requirements\n\n### Requirement 1: Multi-Step Calculator Flow\n\n**User Story:** Als potentieller Kunde m√∂chte ich in **unter 3 Minuten** eine realistische Kostensch√§tzung f√ºr mein Projekt erhalten, ohne mit einem Vertriebler sprechen zu m√ºssen.\n\n#### Acceptance Criteria\n\n1. WHEN User die Route `/kostenrechner` besucht THEN System SHALL eine Hero-Section mit \"Was kostet Ihre Webseite? In 2 Min herausfinden\" und Trust-Indicators anzeigen\n2. WHEN User den Calculator startet THEN System SHALL einen 6-stufigen Wizard mit Progress-Indicator (1/6, 2/6, ...) darstellen\n3. WHEN User Step 1 erreicht THEN System SHALL Projekttyp-Auswahl pr√§sentieren (Website, Web-App, Mobile App, E-Commerce, Custom, Unsicher)\n4. WHEN User einen Projekttyp ausw√§hlt THEN System SHALL sofort zum n√§chsten Step navigieren\n5. WHEN User \"Zur√ºck\"-Button klickt THEN System SHALL zum vorherigen Step navigieren ohne Datenverlust\n6. WHEN User Step 6 erreicht THEN System SHALL den 3-Wege-Vergleich mit allen Berechnungen anzeigen\n7. IF User Calculator unterbricht THEN System SHALL State in URL Query Params speichern f√ºr shareable links\n8. WHEN User auf Mobile-Device zugreift THEN System SHALL responsives Layout mit gestackten Steps darstellen\n\n---\n\n### Requirement 2: Step 1 - Projekttyp\n\n**User Story:** Als Nutzer m√∂chte ich meinen Projekttyp schnell ausw√§hlen, damit das System eine passende Basis-Kalkulation starten kann.\n\n#### Acceptance Criteria\n\n1. WHEN Step 1 angezeigt wird THEN System SHALL 6 Radio Cards mit Icons pr√§sentieren (Website, Web-App, Mobile App, E-Commerce, Custom, Unsicher)\n2. WHEN User einen Projekttyp ausw√§hlt THEN System SHALL visuelles Feedback (Selected State) anzeigen\n3. WHEN User Projekttyp w√§hlt THEN System SHALL Basis-Preisrange festlegen:\n   - Website: 2.500‚Ç¨ - 8.000‚Ç¨\n   - Web-App: 10.000‚Ç¨ - 50.000‚Ç¨\n   - Mobile App: 15.000‚Ç¨ - 80.000‚Ç¨\n   - E-Commerce: 8.000‚Ç¨ - 40.000‚Ç¨\n4. WHEN User \"Unsicher\" w√§hlt THEN System SHALL Default zu \"Website\" mit Hinweis-Badge\n5. WHEN Basis-Preis festgelegt wird THEN System SHALL Live-Preview Sidebar aktualisieren\n\n---\n\n### Requirement 3: Step 2 - Design & Umfang\n\n**User Story:** Als Nutzer m√∂chte ich den Design-Level und Projekt-Umfang angeben, damit die Kalkulation meinen Qualit√§tsanspr√ºchen entspricht.\n\n#### Acceptance Criteria\n\n1. WHEN Step 2 angezeigt wird THEN System SHALL 4 Konfigurationsbereiche pr√§sentieren:\n   - Design Level (Radio Cards)\n   - Umfang (Range Slider mit visueller Anzeige)\n   - Responsiveness (Select Dropdown)\n   - UX-Komplexit√§t (Radio Group)\n2. WHEN User \"Template-basiert\" w√§hlt THEN System SHALL Multiplikator 1.0x anwenden\n3. WHEN User \"Custom Design\" w√§hlt THEN System SHALL Multiplikator 1.5x anwenden\n4. WHEN User \"Premium Custom Design\" w√§hlt THEN System SHALL Multiplikator 2.0x anwenden\n5. WHEN User Umfang auf \"6-15 Seiten\" einstellt THEN System SHALL +400‚Ç¨ pro Seite (Durchschnitt 10 Seiten) addieren\n6. WHEN User \"Progressive Web App\" w√§hlt THEN System SHALL Multiplikator 1.6x f√ºr Responsiveness anwenden\n7. WHEN User \"Premium UX\" w√§hlt THEN System SHALL +5.000‚Ç¨ addieren\n8. IF Eingaben ge√§ndert werden THEN System SHALL Live-Preview in Echtzeit aktualisieren\n\n---\n\n### Requirement 4: Step 3 - Funktionalit√§ten\n\n**User Story:** Als Nutzer m√∂chte ich ben√∂tigte Features ausw√§hlen, damit die Kalkulation alle technischen Anforderungen ber√ºcksichtigt.\n\n#### Acceptance Criteria\n\n1. WHEN Step 3 angezeigt wird THEN System SHALL Checkbox-Grid mit 10+ Features darstellen\n2. WHEN User \"Content Management System\" ankreuzt THEN System SHALL Conditional Sub-Options anzeigen (Strapi/Sanity/Custom)\n3. WHEN User \"User Authentication\" w√§hlt THEN System SHALL +2.000‚Ç¨ - 4.000‚Ç¨ addieren\n4. WHEN User Sub-Option \"2FA\" aktiviert THEN System SHALL zus√§tzliche +1.000‚Ç¨ addieren\n5. WHEN User \"Payment-Integration\" w√§hlt THEN System SHALL Provider-Auswahl anzeigen (Stripe/PayPal/Mollie)\n6. WHEN User \"Mehrsprachigkeit\" w√§hlt THEN System SHALL Sprachen-Anzahl abfragen\n7. WHEN User 3+ Sprachen eingibt THEN System SHALL +4.000‚Ç¨ addieren\n8. WHEN User Features selektiert/deselektiert THEN System SHALL Gesamt-Preis in Preview sofort aktualisieren\n9. IF keine Features gew√§hlt wurden THEN System SHALL Hinweis \"Basis-Funktionalit√§t ohne Extras\" anzeigen\n\n---\n\n### Requirement 5: Step 4 - Qualit√§t & Performance\n\n**User Story:** Als qualit√§tsbewusster Kunde m√∂chte ich nicht-funktionale Anforderungen (SEO, Performance, Security) spezifizieren.\n\n#### Acceptance Criteria\n\n1. WHEN Step 4 angezeigt wird THEN System SHALL Accordion mit 6 Kategorien pr√§sentieren:\n   - SEO-Optimierung\n   - Performance-Optimierung\n   - Security\n   - DSGVO-Compliance\n   - Testing\n   - Accessibility\n2. WHEN User \"Advanced SEO\" (+2.500‚Ç¨) w√§hlt THEN System SHALL Beschreibung \"Schema.org, Performance, Analytics\" anzeigen\n3. WHEN User \"Premium Performance\" (+3.500‚Ç¨) w√§hlt THEN System SHALL \"CDN, Edge Functions, Performance Budget\" beschreiben\n4. WHEN User \"Penetration Testing\" (+3.500‚Ç¨) w√§hlt THEN System SHALL Security-Badge in Preview anzeigen\n5. WHEN User \"DSGVO-Compliance\" ankreuzt THEN System SHALL +800‚Ç¨ addieren\n6. WHEN User \"E2E Tests\" (+2.500‚Ç¨) w√§hlt THEN System SHALL Quality-Indicator erh√∂hen\n7. WHEN User \"WCAG AAA\" (+2.500‚Ç¨) w√§hlt THEN System SHALL Accessibility-Badge anzeigen\n8. IF keine Qualit√§ts-Features gew√§hlt THEN System SHALL Warnung \"Basis-Qualit√§t ohne Optimierungen\" zeigen\n\n---\n\n### Requirement 6: Step 5 - Timeline & Support\n\n**User Story:** Als Kunde m√∂chte ich Projektrahmen (Timeline, Wartung, Support) festlegen, damit ich Gesamtkosten und Laufzeit verstehe.\n\n#### Acceptance Criteria\n\n1. WHEN Step 5 angezeigt wird THEN System SHALL 5 Konfigurationsbereiche pr√§sentieren:\n   - Projektstart (Radio Cards)\n   - Wartung & Updates (Radio Cards)\n   - Support-Paket (Select)\n   - Hosting (Toggle)\n   - Training & Dokumentation (Checkbox)\n2. WHEN User \"Urgent (Sofort)\" w√§hlt THEN System SHALL Aufpreis-Multiplikator 1.3x anwenden\n3. WHEN User \"Premium Wartung\" (+350‚Ç¨/Monat) w√§hlt THEN System SHALL monatliche Kosten in Breakdown anzeigen\n4. WHEN User \"12 Monate Support\" (+1.500‚Ç¨) w√§hlt THEN System SHALL Einmalkosten addieren\n5. WHEN User \"Managed Hosting\" aktiviert THEN System SHALL +50‚Ç¨/Monat zu monatlichen Kosten addieren\n6. WHEN User \"Training & Dokumentation\" ankreuzt THEN System SHALL +800‚Ç¨ Einmalkosten addieren\n7. WHEN User \"Weiter\" klickt THEN System SHALL finale Berechnung durchf√ºhren und zu Step 6 navigieren\n\n---\n\n### Requirement 7: Live Price Preview Sidebar\n\n**User Story:** Als Nutzer m√∂chte ich w√§hrend der Konfiguration jederzeit die aktuelle Kostensch√§tzung sehen.\n\n#### Acceptance Criteria\n\n1. WHEN Calculator auf Desktop angezeigt wird THEN System SHALL Sticky Sidebar rechts (40% Breite) darstellen\n2. WHEN Calculator auf Mobile angezeigt wird THEN System SHALL Preview unterhalb der Steps fixiert anzeigen\n3. WHEN User Eingaben √§ndert THEN System SHALL Preview in < 100ms aktualisieren (debounced)\n4. WHEN Preview aktualisiert wird THEN System SHALL animierten Preis-Counter zeigen\n5. WHEN Preis berechnet wird THEN System SHALL Range anzeigen (z.B. \"12.500‚Ç¨ - 18.000‚Ç¨\")\n6. WHEN Timeline berechnet wird THEN System SHALL gesch√§tzte Dauer anzeigen (z.B. \"‚è± 6-8 Wochen\")\n7. WHEN Kosten kategorisiert sind THEN System SHALL Breakdown anzeigen:\n   - Basis: 5.000‚Ç¨\n   - Design: +3.000‚Ç¨\n   - Features: +4.500‚Ç¨\n8. IF monatliche Kosten vorhanden THEN System SHALL separate Zeile \"Monatlich: 400‚Ç¨/Monat\" zeigen\n\n---\n\n### Requirement 8: Step 6 - Ergebnis & 3-Way Comparison\n\n**User Story:** Als vergleichssuchender Kunde m√∂chte ich verstehen, warum HEADON die beste Wahl ist.\n\n#### Acceptance Criteria\n\n1. WHEN Step 6 erreicht wird THEN System SHALL Hero-Section mit \"Ihr Projekt: [Generierter Titel]\" anzeigen\n2. WHEN Comparison berechnet wird THEN System SHALL 3-Column Grid pr√§sentieren:\n   - Freelancer (Links)\n   - Traditionelle Agentur (Mitte)\n   - HEADON ‚≠ê BESTE WAHL (Rechts mit Highlight)\n3. WHEN Freelancer-Card angezeigt wird THEN System SHALL zeigen:\n   - Preis: `HEADON_Preis * 0.65`\n   - Dauer: `HEADON_Dauer * 1.9`\n   - Qualit√§t: ‚≠ê‚≠ê‚≠ê (3/5)\n   - ‚úÖ G√ºnstig, ‚ö†Ô∏è Langsam, ‚ùå Kein Support\n4. WHEN Agentur-Card angezeigt wird THEN System SHALL zeigen:\n   - Preis: `HEADON_Preis * 2.2`\n   - Dauer: `HEADON_Dauer * 1.6`\n   - Qualit√§t: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5/5)\n   - ‚úÖ Full-Service, ‚ö†Ô∏è Teuer, ‚ö†Ô∏è Overhead\n5. WHEN HEADON-Card angezeigt wird THEN System SHALL zeigen:\n   - Preis: `HEADON_Preis * 1.0` (Referenz)\n   - Dauer: `HEADON_Dauer * 1.0`\n   - Qualit√§t: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5/5)\n   - ‚úÖ Modern Stack, ‚úÖ 2x Schneller, ‚úÖ 40% G√ºnstiger\n6. WHEN Comparison abgeschlossen THEN System SHALL Savings Highlight anzeigen: \"üí∞ Sie sparen mit HEADON: 9.500‚Ç¨ & 10 Wochen\"\n7. WHEN User auf \"Detaillierte Aufschl√ºsselung\" klickt THEN System SHALL Accordion mit Kategorien √∂ffnen\n8. IF auf Mobile THEN System SHALL Tabs statt Grid f√ºr Comparison verwenden (swipeable)\n\n---\n\n### Requirement 9: Lead Capture Dialog\n\n**User Story:** Als qualifizierter Lead m√∂chte ich optional ein detailliertes Angebot per E-Mail erhalten.\n\n#### Acceptance Criteria\n\n1. WHEN Step 6 angezeigt wird THEN System SHALL CTA-Button \"üìß Detailliertes Angebot per E-Mail\" prominent platzieren\n2. WHEN User auf CTA klickt THEN System SHALL Dialog mit Formular √∂ffnen\n3. WHEN Dialog ge√∂ffnet wird THEN System SHALL 5 Felder anzeigen:\n   - Name (Pflichtfeld)\n   - E-Mail (Pflichtfeld, validiert)\n   - Telefon (Optional)\n   - Nachricht (Optional, Textarea)\n   - Bevorzugter Provider (Select: Freelancer/Agentur/HEADON - vorausgew√§hlt: HEADON)\n4. WHEN User Formular absended THEN System SHALL Daten mit Zod validieren\n5. IF Validierung erfolgreich THEN System SHALL Lead zu Supabase `calculator_leads` Tabelle speichern\n6. WHEN Lead gespeichert wird THEN System SHALL Lead-Score berechnen basierend auf:\n   - Budget-Range (h√∂her = mehr Punkte)\n   - Timeline-Urgency (schneller = mehr Punkte)\n   - Feature-Komplexit√§t (mehr Features = mehr Punkte)\n   - Bevorzugter Provider (HEADON = +10 Punkte)\n7. WHEN Lead-Score berechnet THEN System SHALL Lead kategorisieren:\n   - Score > 30: üî• HIGH PRIORITY\n   - Score > 15: ‚ö° MEDIUM\n   - Score ‚â§ 15: üìù STANDARD\n8. WHEN Lead gespeichert THEN System SHALL Email-Notification an HEADON Team senden via Resend API\n9. WHEN Email versendet THEN System SHALL Success-Message anzeigen: \"Vielen Dank! Wir melden uns innerhalb von 24 Stunden.\"\n10. IF Fehler auftritt THEN System SHALL Error-Message anzeigen: \"Fehler beim Senden. Bitte versuchen Sie es erneut.\"\n\n---\n\n### Requirement 10: Share & Export Funktionalit√§t\n\n**User Story:** Als Informationssammler m√∂chte ich mein Ergebnis speichern oder teilen k√∂nnen.\n\n#### Acceptance Criteria\n\n1. WHEN Step 6 angezeigt wird THEN System SHALL \"üîó Ergebnis teilen\" Button pr√§sentieren\n2. WHEN User auf \"Teilen\" klickt THEN System SHALL Shareable URL generieren mit State in Query Params\n3. WHEN URL generiert wird THEN System SHALL alle Selections als JSON in Base64-encodiertem Query Param speichern\n4. WHEN User URL kopiert THEN System SHALL Toast-Notification \"Link kopiert!\" anzeigen\n5. WHEN User shareable URL √∂ffnet THEN System SHALL Calculator mit vorausgef√ºllten Selections laden\n6. WHEN vorausgef√ºllte Daten geladen THEN System SHALL direkt zu Step 6 navigieren\n7. IF Query Params ung√ºltig THEN System SHALL Calculator auf Step 1 zur√ºcksetzen\n\n---\n\n### Requirement 11: Analytics & Event Tracking\n\n**User Story:** Als Product Owner m√∂chte ich detaillierte Nutzungsstatistiken f√ºr Conversion-Optimierung.\n\n#### Acceptance Criteria\n\n1. WHEN User Step abschlie√üt THEN System SHALL Umami Event `calculator-step-completed` mit `{ step: number }` tracken\n2. WHEN User Feature ausw√§hlt THEN System SHALL Event `calculator-feature-selected` mit `{ feature: string }` senden\n3. WHEN User Step 6 erreicht THEN System SHALL Event `calculator-result-viewed` mit Metadata tracken:\n   - `projectType: string`\n   - `estimatedPrice: number`\n   - `provider: string`\n4. WHEN User Lead-Form absendet THEN System SHALL Event `calculator-lead-captured` mit Metadata tracken:\n   - `provider: string`\n   - `leadScore: number`\n   - `estimatedValue: number`\n5. WHEN User \"Teilen\" klickt THEN System SHALL Event `calculator-result-shared` mit `{ method: 'link' }` tracken\n6. WHEN Calculator verlassen wird THEN System SHALL Event `calculator-abandoned` mit `{ lastStep: number }` tracken\n7. IF anonyme Session DANN System SHOULD Session-Daten in `calculator_sessions` Tabelle speichern (optional)\n\n---\n\n### Requirement 12: Email-Benachrichtigungen\n\n**User Story:** Als HEADON Team-Mitglied m√∂chte ich sofortige, priorisierte Benachrichtigungen √ºber neue Calculator-Leads.\n\n#### Acceptance Criteria\n\n1. WHEN neuer Lead gespeichert wird THEN System SHALL 2 Emails senden:\n   - Lead-Best√§tigung an User\n   - Interne Notification an HEADON Team\n2. WHEN User-Email versendet wird THEN System SHALL enthalten:\n   - Betreff: \"Ihre Kostensch√§tzung f√ºr [Projekttyp] - HEADON.pro\"\n   - Personalisierte Anrede mit Namen\n   - 3-Way Comparison Tabelle (HTML)\n   - Savings Highlight\n   - CTA \"üìÖ Termin direkt buchen\" (Calendly-Link)\n   - Detaillierte Kosten-Aufschl√ºsselung\n   - Kontakt-Informationen\n3. WHEN Team-Email versendet wird THEN System SHALL enthalten:\n   - Betreff: \"üî• Neuer Calculator-Lead: [Name] - ‚Ç¨[Wert] - [Priority-Level]\"\n   - Lead-Score Badge prominent (üî•/‚ö°/üìù)\n   - Grid-Layout mit Lead-Informationen\n   - Calculator-Daten als expandable Section\n   - Comparison-Ergebnis\n   - Direct-Reply Button\n4. IF Lead HIGH PRIORITY (Score > 30) THEN System SHALL Betreff mit \"üî•üî•üî•\" pr√§fixen\n5. WHEN Email HTML generiert wird THEN System SHALL responsive Template mit Inline-CSS verwenden\n6. IF Email-Versand fehlschl√§gt THEN System SHALL Error loggen und Retry-Mechanismus aktivieren\n\n---\n\n## Non-Functional Requirements\n\n### Code Architecture and Modularity\n\n#### Single Responsibility Principle\n- **Calculator Engine** (`lib/calculator/calculator-engine.ts`): Isolierte Berechnungs-Logik f√ºr alle 3 Provider\n- **Pricing Configuration** (`lib/calculator/pricing-config.ts`): Zentrale Preis-Definitionen und Multiplikatoren\n- **Step Components** (`components/calculator/steps/`): Jeder Step ist eigenst√§ndiges Modul\n- **Results Components** (`components/calculator/results/`): Comparison-Logik getrennt von Calculator-Flow\n\n#### Modular Design\n- **Shared Components** (`components/calculator/shared/`): Wiederverwendbare UI-Elemente (ProjectTypeCard, FeatureCheckbox, RangeSlider)\n- **Type Definitions** (`lib/calculator/types.ts`): Zentrale TypeScript Interfaces f√ºr Calculator State\n- **Validation Schemas** (`lib/calculator/validation-schemas.ts`): Zod Schemas f√ºr Form-Validierung\n\n#### Dependency Management\n- **Calculator State**: Zentral in `CostCalculator.tsx` via React Hooks (useState)\n- **No Circular Dependencies**: Unidirektionaler Datenfluss (State ‚Üí Steps ‚Üí Preview)\n- **API Integration**: Isoliert in `/api/calculator/route.ts`\n\n#### Clear Interfaces\n- **Calculator State Type**: Definiert alle User-Selections\n- **Comparison Result Type**: Strukturierte Ausgabe f√ºr 3 Provider\n- **Lead Data Type**: Konsistente Daten-Struktur f√ºr Supabase und Email\n\n### Performance\n\n#### Page Load Performance\n- **Initial Load (LCP)**: < 1.5s f√ºr `/kostenrechner` Route\n- **JavaScript Bundle**: < 150KB f√ºr Calculator-spezifischen Code (gzipped)\n- **CSS Bundle**: < 30KB f√ºr Calculator-Styles (gzipped)\n- **TTI**: < 2.5s (Time to Interactive)\n\n#### Runtime Performance\n- **Live Calculation**: < 100ms f√ºr Preis-Update nach User-Input (debounced)\n- **Step Navigation**: < 50ms f√ºr Transition zwischen Steps\n- **Price Animation**: 60 FPS f√ºr Counter-Animation\n- **Comparison Rendering**: < 200ms f√ºr Step 6 Calculation und Rendering\n\n#### Optimization Techniques\n- **Code Splitting**: Lazy Loading f√ºr Step-Components (React.lazy)\n- **Memoization**: useMemo f√ºr teure Berechnungen\n- **Debouncing**: Input-Handler debounced (300ms)\n- **Static Generation**: SSG f√ºr `/kostenrechner` Entry Page\n\n### Security\n\n#### Input Validation\n- **Client-Side**: Zod Schemas f√ºr alle Form-Inputs (Step 1-5, Lead-Form)\n- **Server-Side**: Redundante Zod Validation in API Route\n- **Type Safety**: TypeScript Strict Mode f√ºr Compile-Time Checks\n- **Sanitization**: HTML-Escaping f√ºr User-Inputs in Emails\n\n#### Data Protection\n- **HTTPS Enforcement**: Alle Requests √ºber HTTPS\n- **Environment Variables**: API Keys in .env (Supabase, Resend)\n- **CORS**: Restricted zu eigener Domain\n- **RLS Policies**: Supabase Row Level Security f√ºr `calculator_leads`\n\n#### XSS Prevention\n- **React Auto-Escaping**: Default Escaping f√ºr User-Content\n- **Content Security Policy**: CSP Headers in next.config.ts\n- **No Eval**: Keine dynamic code execution\n- **Sanitized Emails**: HTML Email Templates mit escaped User-Input\n\n### Reliability\n\n#### Error Handling\n- **Try-Catch Blocks**: Alle async Operations wrapped\n- **Graceful Degradation**: Calculator funktioniert ohne JavaScript (Form-Fallback)\n- **Error Boundaries**: React Error Boundaries f√ºr Component-Fehler\n- **API Error Responses**: Strukturierte Error-Messages mit Status Codes\n\n#### Data Persistence\n- **URL State**: Calculator State in Query Params f√ºr Shareable Links\n- **Supabase Transactions**: Atomic Lead-Speicherung\n- **Email Retry**: Automatischer Retry bei Resend API Fehlern\n- **Session Storage**: Optional f√ºr anonyme Session-Tracking\n\n#### Availability\n- **No Single Point of Failure**: Supabase und Resend redundant\n- **Fallback**: Calculator funktioniert auch ohne Analytics\n- **Health Checks**: API Route Monitoring via `/api/health`\n\n### Usability\n\n#### User Experience\n- **Completion Time**: < 3 Minuten f√ºr durchschnittlichen User (Ziel: < 2 Min)\n- **Clear Progress**: Progress Bar zeigt Position (1/6, 2/6, ...)\n- **Instant Feedback**: Live Preview aktualisiert bei jeder √Ñnderung\n- **Accessibility**: WCAG AA konform (Keyboard Navigation, Screen Reader Support)\n\n#### Mobile Optimization\n- **Touch-Friendly**: Mindestens 44x44px Touch Targets\n- **Responsive**: Stacked Layout auf < 768px\n- **Swipeable Tabs**: Comparison als horizontales Swipe auf Mobile\n- **No Horizontal Scroll**: Alle Inhalte in Viewport-Breite\n\n#### Error Prevention\n- **Required Field Indicators**: Deutliche Markierung von Pflichtfeldern\n- **Validation Feedback**: Inline Error Messages bei ung√ºltigen Inputs\n- **Confirmation**: Success/Error Toasts nach Actions\n- **Back Button**: Jederzeit zur√ºck ohne Datenverlust\n\n#### Content Quality\n- **German Language**: Alle Texte in professionellem Deutsch\n- **Clear Labels**: Verst√§ndliche Bezeichnungen f√ºr alle Optionen\n- **Help Text**: Tooltips f√ºr komplexe Features\n- **Visual Hierarchy**: Klare Strukturierung mit Typography und Spacing\n\n### Scalability\n\n#### Load Handling\n- **Concurrent Users**: Unterst√ºtzt 100+ simultane Calculator-Nutzer\n- **Database Scaling**: Supabase managed scaling f√ºr Lead-Speicherung\n- **CDN Caching**: Statische Assets √ºber CDN\n- **API Rate Limiting**: Schutz vor Abuse (max 10 Requests/Minute/IP)\n\n#### Data Growth\n- **Lead Storage**: Unbegrenzte Leads in Supabase (skaliert automatisch)\n- **Query Performance**: Indexes auf `created_at`, `lead_score`, `status`\n- **Session Data**: Optional limitiert auf letzte 30 Tage\n\n### SEO Requirements\n\n#### Meta Tags\n- **Title**: \"Kostenrechner: Website & App Entwicklung | HEADON.pro\"\n- **Description**: \"Berechnen Sie in 2 Minuten die Kosten f√ºr Ihre Website, Web-App oder Mobile App. Vergleichen Sie Freelancer, Agenturen & HEADON. 100% transparent & kostenlos.\"\n- **Keywords**: website kosten rechner, app entwicklung kosten, webseite preis kalkulator, homepage kosten berechnen\n- **Canonical URL**: https://headon.pro/kostenrechner\n- **Open Graph**: OG Image, Title, Description f√ºr Social Sharing\n\n#### Structured Data\n- **Schema.org Type**: WebApplication\n- **Name**: \"HEADON Kostenrechner\"\n- **Application Category**: BusinessApplication\n- **Offers**: Free tool (price: 0 EUR)\n- **Feature List**: Kostensch√§tzung, 3-Wege-Vergleich, Timeline-Sch√§tzung\n\n#### Internal Linking\n- **Homepage Hero**: \"Kosten berechnen\" CTA zu `/kostenrechner`\n- **Service Pages**: \"Was kostet das? ‚Üí Kostenrechner\" Links\n- **Blog Posts**: Kontextuelle Verlinkung zu Calculator\n\n### Accessibility (WCAG AA)\n\n#### Keyboard Navigation\n- **Tab Order**: Logische Reihenfolge durch alle interaktiven Elemente\n- **Enter/Space**: Aktivierung von Buttons und Checkboxen\n- **Arrow Keys**: Navigation in Radio Groups und Selects\n- **Escape**: Schlie√üen von Dialogs\n\n#### Screen Reader Support\n- **ARIA Labels**: Descriptive Labels f√ºr alle Form-Elemente\n- **ARIA Live Regions**: Announcement von Preis-Updates\n- **ARIA Roles**: Semantic Roles f√ºr Custom Components\n- **Alt Text**: Beschreibende Alt-Texte f√ºr Icons\n\n#### Visual Accessibility\n- **Color Contrast**: Mindestens 4.5:1 f√ºr Text, 3:1 f√ºr UI-Elemente\n- **Focus Indicators**: Deutliche Focus Rings (2px solid)\n- **Text Scaling**: Unterst√ºtzt bis 200% Zoom ohne Horizontal Scroll\n- **No Color-Only Indicators**: Informationen nie nur durch Farbe vermittelt\n\n### Browser Compatibility\n\n#### Supported Browsers\n- **Desktop**: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+\n- **Mobile**: iOS Safari 14+, Chrome Mobile 90+, Samsung Internet 14+\n- **Progressive Enhancement**: Basis-Funktionalit√§t ohne JavaScript (Form-Fallback)\n\n#### Polyfills & Fallbacks\n- **CSS Grid**: Fallback zu Flexbox f√ºr √§ltere Browser\n- **Intersection Observer**: Polyfill f√ºr Safari < 12.1\n- **Framer Motion**: Graceful Degradation ohne Animationen\n\n### Testing Requirements\n\n#### Manual Testing\n- **Cross-Browser**: Testing in allen supported Browsers\n- **Responsive**: Testing auf 3+ Device-Gr√∂√üen (Mobile, Tablet, Desktop)\n- **Accessibility**: Manual Testing mit Keyboard und Screen Reader\n- **User Flow**: Kompletter Calculator-Durchlauf mit verschiedenen Szenarien\n\n#### Automated Testing (Post-Launch)\n- **E2E Tests**: Playwright Tests f√ºr kritische User-Flows\n- **Unit Tests**: Jest Tests f√ºr Calculator-Engine und Pricing-Logic\n- **Integration Tests**: API Route Testing mit Supabase Mock\n- **Visual Regression**: Chromatic/Percy f√ºr UI-√Ñnderungen\n\n### Documentation Requirements\n\n#### Code Documentation\n- **JSDoc**: Alle exported Functions mit Beschreibung und Beispielen\n- **Type Annotations**: Explizite TypeScript Types f√ºr alle Funktionen\n- **README**: Setup-Anleitung, Architektur-√úbersicht, Deployment-Guide\n\n#### User Documentation\n- **FAQ**: H√§ufige Fragen zu Pricing und Calculator-Nutzung\n- **Tooltips**: Inline-Hilfe f√ºr komplexe Features\n- **Help Section**: Link zu ausf√ºhrlicher Dokumentation\n\n#### Technical Documentation\n- **Architecture Diagram**: √úbersicht √ºber Components und Data Flow\n- **API Documentation**: OpenAPI Spec f√ºr `/api/calculator` Route\n- **Database Schema**: ER-Diagramm f√ºr `calculator_leads` und `calculator_sessions`\n",
  "fileStats": {
    "size": 25205,
    "lines": 520,
    "lastModified": "2025-11-20T12:22:16.859Z"
  },
  "comments": []
}